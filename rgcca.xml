<tool id="multiOmics_Toolbox" name="multiOmics_Toolbox" version="1.0">

    <description>performs multi-variate analysis (PCA, CCA, PLS, RGCCA) and projects the variables and samples into a bi-dimensional space </description>

<!--    <macros>
        <import>macros.xml</import>
    </macros>-->


    <command ><![CDATA[
    #set $size = len ($dataset)
    #if $size > 0
        #set $data_paths = $dataset[0].block.file_name
        #set $data_names = $dataset[0].block.name
        #for $i, $s in enumerate( $dataset )
            #if $i > 0
                #set $data_paths += ',' + $s.block.file_name
                #set $data_names += ',' + $s.block.name
            #end if
        #end for
        Rscript $__tool_directory__/galaxy_rgcca.R
                -d "${$data_paths}"
                -n "${$data_names}"
                --output1 $output1 --output2 $output2 --output3 $output3
    #else
        echo "Select at least one file for the analysis"; exit 1;
    #end if
    ]]></command>

    <stdio>
        <exit_code range="1" level="fatal" description="" />
    </stdio>

    <inputs>

    </inputs>

    <outputs>
        <data name="output1" label="variables_space.pdf\" format="pdf" />
        <data name="output2" label="samples_space.pdf" format="pdf" />
        <data name="output3"  label="best_biomarkers.pdf" format="pdf" />
    </outputs>

    <help>

    </help>

    <citations>
        <citation type="doi">10.1093/nar/gky301</citation>
        <citation type="doi">10.1111/1467-9868.00293</citation>
    <citation type="doi">10.1016/0377-0427(87)90125-7</citation>

    </citations>
</tool>
