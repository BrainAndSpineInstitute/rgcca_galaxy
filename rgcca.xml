<tool id="multiOmics_Toolbox" name="multiOmics_Toolbox" version="1.0">

    <description>performs multi-variate analysis (PCA, CCA, PLS, RGCCA) and projects the variables and samples into a bi-dimensional space </description>

<!--    <macros>
        <import>macros.xml</import>
    </macros>-->


    <command ><![CDATA[
        #set $data_paths = $block_1.file_name
        #set $data_names = $block_1.name
        #for $i, $s in enumerate( $dataset )
                #set $data_paths += ',' + $s.block_n.file_name
                #set $data_names += ',' + $s.block_n.name
        #end for
        Rscript $__tool_directory__/galaxy_rgcca.R
                -d "${$data_paths}"
                -n "${$data_names}"
                --output1 $output1 --output2 $output2 --output3 $output3
    ]]></command>

    <stdio>
        <exit_code range="1" level="fatal" description="" />
    </stdio>

    <inputs>
    <param name="block_1" type="data" format="tsv,tabular,txt,csv" label="Dataset" help="the first column should co" />
    <repeat name="dataset" title="New block dataset">
        <param name="block_n" type="data" format="tsv,tabular,txt,csv" label="Block file"/>
    </repeat>

    </inputs>

    <outputs>
        <data name="output1" label="variables_space.pdf\" format="pdf" />
        <data name="output2" label="samples_space.pdf" format="pdf" />
        <data name="output3"  label="best_biomarkers.pdf" format="pdf" />
    </outputs>

    <help>

    </help>

    <citations>
        <citation type="doi">10.1093/nar/gky301</citation>
        <citation type="doi">10.1111/1467-9868.00293</citation>
    <citation type="doi">10.1016/0377-0427(87)90125-7</citation>

    </citations>
</tool>
